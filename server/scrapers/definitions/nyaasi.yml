id: nyaasi
name: Nyaa.si
description: Nyaa is a Public torrent site focused on Eastern ASIAN media including anime, manga, literature and music
language: en-US
type: public
links:
  - https://nyaa.si/
  - https://nyaa.iss.ink/
  - https://nyaa.land/
  - https://nyaa.unblockninja.com/
caps:
  categorymappings:
    - id: 10
      cat: TV/Anime
      desc: Anime
    - id: 11
      cat: TV/Anime
      desc: Anime - Anime Music Video
    - id: 12
      cat: TV/Anime
      desc: Anime - English-translated
    - id: 13
      cat: TV/Anime
      desc: Anime - Non-English-translated
    - id: 14
      cat: TV/Anime
      desc: Anime - Raw
    - id: 10
      cat: Movies/Other
      desc: Anime
    - id: 11
      cat: Movies/Other
      desc: Anime - Anime Music Video
    - id: 12
      cat: Movies/Other
      desc: Anime - English-translated
    - id: 13
      cat: Movies/Other
      desc: Anime - Non-English-translated
    - id: 14
      cat: Movies/Other
      desc: Anime - Raw
    - id: 20
      cat: Audio
      desc: Audio
    - id: 21
      cat: Audio
      desc: Audio - Lossless
    - id: 22
      cat: Audio
      desc: Audio - Lossy
    - id: 30
      cat: Books
      desc: Literature
    - id: 31
      cat: Books
      desc: Literature  English-translated
    - id: 32
      cat: Books
      desc: Literature - Non-English-translated
    - id: 33
      cat: Books
      desc: Literature - Raw
    - id: 40
      cat: TV
      desc: Live Action
    - id: 41
      cat: TV
      desc: Live Action - English-translated
    - id: 42
      cat: TV
      desc: Live Action - Idol/Promotional Video
    - id: 43
      cat: TV
      desc: Live Action - Non-English-translated
    - id: 44
      cat: TV
      desc: Live Action - Raw
    - id: 50
      cat: Other
      desc: Pictures
    - id: 51
      cat: Other
      desc: Pictures - Graphics
    - id: 52
      cat: Other
      desc: Pictures - Photos
    - id: 60
      cat: PC
      desc: Software
    - id: 61
      cat: PC/ISO
      desc: Software - Applications
    - id: 62
      cat: PC/Games
      desc: Software - Games
  modes:
    search:
      - q
    tv-search:
      - q
      - season
      - ep
    movie-search:
      - q
    music-search:
      - q
    book-search:
      - q
search:
  paths:
    - path: /
      inputs:
        q: '{{ .Keywords }}'
    - path: /
      inputs:
        q: '{{ if .Keywords }}{{ re_replace .Keywords "\b0(\d{1})\b" "$1" }}{{ else }}{{ end }}'
        p: '{{ if .Keywords }}{{ else }}2{{ end }}'
  rows:
    selector: tr.default,tr.danger,tr.success
  fields:
    category:
      selector: td:nth-child(1) a
      attribute: href
      filters:
        - name: split
          args:
            - '='
            - -1
    category_group_id:
      selector: td:nth-child(1) a
      attribute: href
      filters:
        - name: split
          args:
            - '='
            - -1
        - name: split
          args:
            - _
            - 0
    title_default:
      selector: td:nth-child(2) a:last-of-type
    title_phase1:
      selector: td:nth-child(2) a:last-of-type:contains("[PuyaSubs!] ")
      optional: true
      filters:
        - name: append
          args: ' Spanish'
    title_keyword_year:
      text: '{{ .Query.Keywords }}'
      filters:
        - name: regexp
          args: \b((19|20)\d{2})\b
    title_phase2:
      text: '{{ or (.Result.title_phase1) (.Result.title_default) }}'
      filters:
        - name: re_replace
          args:
            - ^(\[.+?\] ?)?(\[.+?\] ?)?(.+?)(\[)
            - >-
              $1$2$3{{ if and (.Config.radarr_compatibility) (.Result.title_keyword_year) }} {{
              .Result.title_keyword_year }} $4{{ else }}$4{{ end }}
    title_phase3:
      text: '{{ .Result.title_phase2 }}'
      filters:
        - name: re_replace
          args:
            - (?i)\b((?:S|Seasons?|EP?|Episodes?)\s?)(\d+)(?:\-|[\s~\+àa&]+)(\d+)\b
            - $1$2-$3
        - name: re_replace
          args:
            - (?i)\b(?:S|Seasons?)\s?(\d+(?:-\d+)?)[\s\-]+(?:EP|Episodes?)\s?(\d+(?:-\d+)?)\b
            - S$1E$2
        - name: re_replace
          args:
            - >-
              (?i)\b(?:S|Seasons?)\s?(\d+(?:-\d+)?)(?:.+?)(?:EP|Episodes?)\s?(\d+(?:-\d+)?)\b(?!(?:-\d+)?\sS\d+(?:-\d+)?E\d+(?:-\d+)?)
            - S$1E$2
        - name: re_replace
          args:
            - \b (II) - (\d+)[\s\-~\+àa&]+(\d+)
            - ' $1 S02 - $2-$3'
        - name: re_replace
          args:
            - \b (II) - (\d+)
            - ' $1 S02 - $2'
        - name: re_replace
          args:
            - \b (III) - (\d+)[\s\-~\+àa&]+(\d+)
            - ' $1 S03 - $2-$3'
        - name: re_replace
          args:
            - \b (III) - (\d+)
            - ' $1 S03 - $2'
        - name: re_replace
          args:
            - (?i)\b(\d+)(st|nd|rd|th) Season\b
            - $0 S$1
        - name: re_replace
          args:
            - (?i)_(\d+)(st|nd|rd|th)_season_(\d+)_
            - $0S$1E$3_
        - name: re_replace
          args:
            - (?i)_(\d+)(st|nd|rd|th)_season_
            - $0S$1_
        - name: re_replace
          args:
            - (?i)\b(S\d+(?:-\d+)?) - (\d+)[\s\-~\+àa&]+(\d+)\b
            - $1E$2-$3
        - name: re_replace
          args:
            - (?i)\b(S\d+(?:-\d+)?) - (\d+)\b
            - $1E$2
        - name: re_replace
          args:
            - >-
              (?i)\b(?:S\s|Seasons?\s?)(\d+(?:-\d+)?)\b(?!(?:-\d+)?\s(?:EP|Episodes?)?\s?(?:\d+(?:-\d+)?)?\s?S\d+(?:E\d+(?:-\d+)?)?)
            - S$1
        - name: re_replace
          args:
            - (?i)\b(?:EP|Episodes?)\s?(\d+(?:-\d+)?)\b(?!(?:-\d+)?\sS\d+(?:-\d+)?(?:E\d+(?:-\d+)?)?)
            - S01E$1
        - name: re_replace
          args:
            - \s+
            - ' '
        - name: trim
    title_has_season:
      text: '{{ .Result.title_phase3 }}'
      filters:
        - name: regexp
          args: (?i)(S\d{1,3}(E\d+)?)
        - name: append
          args: 'NULL'
    title_has_episode:
      text: '{{ .Result.title_phase3 }}'
      filters:
        - name: regexp
          args: \b(.+? - ?)(\d+(-\d+)?) ([\[\(])\b
        - name: append
          args: 'NULL'
    title_has_movie_ova:
      text: '{{ .Result.title_phase3 }}'
      filters:
        - name: regexp
          args: (?i)(?<![A-Za-z0-9])(Movies?|OVA|OAV)(?![A-Za-z0-9])
        - name: re_replace
          args:
            - (?i)(Movies?|OVA|OAV)
            - 'YES'
    title_optional:
      text: '{{ .Result.title_phase3 }}'
      filters:
        - name: re_replace
          args:
            - ^(\[.+?].+?)\s*(?<![\]\)])((?:\[|\(| - ).+)
            - >-
              {{ if and (and (eq .Result.category_group_id "1") (ne .Result.title_has_movie_ova "YES")) (and (eq
              .Result.title_has_season "NULL") (eq .Result.title_has_episode "NULL")) }}$1 S01 $2{{ else }}$1 $2{{ end
              }}
    title:
      text: '{{ if .Config.sonarr_compatibility }}{{ .Result.title_optional }}{{ else }}{{ .Result.title_phase2 }}{{ end }}'
    details:
      selector: td:nth-child(2) a:last-of-type
      attribute: href
    download_optional:
      selector: td:nth-child(3) a[href$=".torrent"]
      attribute: href
      optional: true
    download:
      text: '{{ if .Config.prefer_magnet_links }}{{ else }}{{ .Result.download_optional }}{{ end }}'
      optional: true
    magnet:
      selector: td:nth-child(3) a[href^="magnet:?"]
      attribute: href
    size:
      selector: td:nth-child(4)
    date:
      selector: td:nth-child(5)
      filters:
        - name: append
          args: ' -00:00'
        - name: dateparse
          args: yyyy-MM-dd HH:mm zzz
    seeders:
      selector: td:nth-child(6):not(:empty)
      optional: true
      default: 0
    leechers:
      selector: td:nth-child(7):not(:empty)
      optional: true
      default: 0
    grabs:
      selector: td:nth-child(8):not(:empty)
      optional: true
      default: 0
    downloadvolumefactor:
      text: 0
    uploadvolumefactor:
      text: 1
    description:
      selector: td:nth-child(2) a:last-of-type
