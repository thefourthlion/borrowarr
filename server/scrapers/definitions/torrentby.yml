id: torrentby
name: torrent.by
description: torrent.by is a BELARUSIAN Public Torrent Tracker
language: ru-RU
type: public
links:
  - https://torrent.by/
search:
  paths:
    - path: '{{ if .Keywords }}search/?search={{ .Keywords }}&cat=0&search_in=0{{ else }}today/{{ end }}'
  rows:
    selector: tr[class^="ttable_col"]
  fields:
    category:
      text: other
    title:
      selector: td:nth-child(3) a
      filters:
        - name: re_replace
          args:
            - (?i)(\d+(?:-\d+)?)[xх](\d+(?:-\d+)?)\s*из\s*(\d+)
            - S$1E$2 of $3
        - name: re_replace
          args:
            - (?i)(\d+(?:-\d+)?)[xх](\d+(?:-\d+)?)
            - S$1E$2
        - name: re_replace
          args:
            - (?i)(\d+(?:-\d+)?)\s*из\s*(\d+)
            - E$1 of $2
        - name: re_replace
          args:
            - (?i)\bFiles-х\b
            - Files-x
        - name: re_replace
          args:
            - (?i)\sот\s([\w\p{P}\p{S}]+)$
            - '-$1'
        - name: re_replace
          args:
            - \s\|\s(\w{4,})$
            - '-$1'
        - name: re_replace
          args:
            - (\([\p{IsCyrillic}\W]+\))|(^[\p{IsCyrillic}\W\d]+\/ )|([\p{IsCyrillic} \-]+,+)|([\p{IsCyrillic}]+)
            - '{{ if .Config.stripcyrillic }}{{ else }}$1$2$3$4{{ end }}'
        - name: re_replace
          args:
            - (?i)\bHDTV[-\s]?Rip\b
            - HDTV
        - name: re_replace
          args:
            - (?i)\bSAT[-\s]?Rip\b
            - HDTV
        - name: re_replace
          args:
            - (?i)\bWEB[-\s]?DL[-\s]?Rip\b
            - WEB-DL
        - name: re_replace
          args:
            - (?i)\bWEB\sRip\b
            - WEBRip
        - name: re_replace
          args:
            - (?i)\bWEB\sDL\b
            - WEB-DL
        - name: re_replace
          args:
            - '[\[\(\{<«][\s\W]*[\]\)\}>»]'
            - ''
        - name: re_replace
          args:
            - ^[\s&,\.!\?\+\-_\|\/':]+
            - ''
        - name: append
          args: '{{ if .Config.addrussiantotitle }} RUS{{ else }}{{ end }}'
    details:
      selector: td:nth-child(3) a
      attribute: href
    download:
      selector: a.dwnld
      attribute: href
    magnet:
      selector: a[href^="magnet:?xt="]
      attribute: href
    size:
      selector: td:nth-child(5)
    seeders:
      selector: font[color="green"]
    leechers:
      selector: font[color="red"]
    date_day:
      selector: td:nth-child(1):contains("Вчера"), td:nth-child(1):contains("Сегодня")
      optional: true
      filters:
        - name: replace
          args:
            - Вчера
            - Yesterday
        - name: replace
          args:
            - Сегодня
            - Today
        - name: fuzzytime
    date_year:
      selector: td:nth-child(1):contains("-")
      optional: true
      filters:
        - name: append
          args: ' +03:00'
        - name: dateparse
          args: yyyy-MM-dd zzz
    date:
      text: '{{ if or .Result.date_year .Result.date_day }}{{ or .Result.date_year .Result.date_day }}{{ else }}now{{ end }}'
    downloadvolumefactor:
      text: 0
    uploadvolumefactor:
      text: 1
    description:
      selector: td:nth-child(3) a
